parameters:
- name: 'EnableIIS'
  type: string
- name: 'IISDeploymentType'
  type: string
- name: 'ActionIISWebsite'
  type: string	
- name: 'WebsiteName'
  type: string
# - name: 'WebsitePhysicalPath'
#   type: string
- name: 'WebsiteAuthUserName'
  type: string  
# - name: 'WebsiteAuthUserPassword'
#   type: string
- name: 'Package'
  type: string
- name: 'DotNetVersionForWebsite'
  type: string

steps:
- task: IISWebAppManagementOnMachineGroup@0
  inputs:
      EnableIIS: '${{ Parameters.EnableIIS }}'
      IISDeploymentType: '${{ Parameters.IISDeploymentType }}'
      ActionIISWebsite: '${{ Parameters.ActionIISWebsite }}'
      WebsiteName: '${{ Parameters.WebsiteName }}'
      WebsitePhysicalPath: '%SystemDrive%\appDeploy\${{Parameters.WebsiteName}}'
      WebsitePhysicalPathAuth: 'WebsiteWindowsAuth'
      WebsiteAuthUserName: '${{ Parameters.WebsiteAuthUserName }}'
      #WebsiteAuthUserPassword: '${{ Parameters.WebsiteAuthUserPassword }}'
      WebsiteAuthUserPassword: $(Password)
      CreateOrUpdateAppPoolForWebsite: true
      AppPoolNameForWebsite: '${{ Parameters.WebsiteName }}'
      DotNetVersionForWebsite: 'v4.0'
      PipeLineModeForWebsite: 'Integrated'
      AppPoolIdentityForWebsite: 'ApplicationPoolIdentity'
      AddBinding: true
      Bindings: |
                  {
                      bindings:[
                          {
                              "protocol":"https",
                              "ipAddress":"",
                              "hostname":"",
                              "port":"443",
                              "sslThumbprint":"607A87AEA7A828AA86110B207707EA78A087BD21",
                              "sniFlag":false
                          }
                      ]
                  }
   
- task: IISWebAppDeploymentOnMachineGroup@0
  inputs:
      WebSiteName: '${{ Parameters.WebsiteName }}'
      Package: '${{ Parameters.Package }}'